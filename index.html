<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Some Stars - æˆ‘çš„GitHubæ˜Ÿæ ‡æ”¶è—</title>
    <meta name="description" content="â­ æˆ‘çš„staråˆ—è¡¨ï¼Œæ¯å¤©è‡ªåŠ¨æ›´æ–° â­">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #24292f;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #ffffff;
        }
        .header {
            text-align: center;
            margin-bottom: 3rem;
        }
        .header h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: #0969da;
        }
        .subtitle {
            font-size: 1.2rem;
            color: #656d76;
            margin-bottom: 2rem;
        }
        .nav-links {
            margin: 2rem 0;
        }
        .nav-links a {
            display: inline-block;
            padding: 8px 16px;
            margin: 0 8px;
            background-color: #f6f8fa;
            border: 1px solid #d0d7de;
            border-radius: 6px;
            text-decoration: none;
            color: #24292f;
            transition: all 0.2s;
        }
        .nav-links a:hover {
            background-color: #f3f4f6;
            border-color: #d0d7de;
        }
        .divider {
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, #0969da, #8b5cf6, #0969da);
            margin: 2rem 0;
            border-radius: 2px;
        }
        .loading {
            text-align: center;
            font-size: 1.1rem;
            color: #656d76;
            margin: 3rem 0;
        }
        .toc {
            background-color: #f6f8fa;
            border: 1px solid #d0d7de;
            border-radius: 6px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        .toc h2 {
            margin-top: 0;
            color: #0969da;
        }
        .toc-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 0.5rem;
            margin-top: 1rem;
        }
        .toc-item {
            padding: 0.5rem;
            background-color: #ffffff;
            border: 1px solid #d0d7de;
            border-radius: 4px;
            text-decoration: none;
            color: #24292f;
            transition: all 0.2s;
        }
        .toc-item:hover {
            background-color: #f3f4f6;
            border-color: #0969da;
        }
        .language-section {
            margin: 2rem 0;
        }
        .language-title {
            font-size: 1.8rem;
            color: #0969da;
            border-bottom: 2px solid #d0d7de;
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }
        .repo-item {
            background-color: #f6f8fa;
            border: 1px solid #d0d7de;
            border-radius: 6px;
            padding: 1rem;
            margin: 0.5rem 0;
            transition: all 0.2s;
        }
        .repo-item:hover {
            border-color: #0969da;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .repo-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: #0969da;
            text-decoration: none;
        }
        .repo-name:hover {
            text-decoration: underline;
        }
        .repo-description {
            color: #656d76;
            margin-top: 0.5rem;
        }
        .repo-stats {
            display: flex;
            gap: 1rem;
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: #656d76;
        }
        .footer {
            text-align: center;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid #d0d7de;
            color: #656d76;
        }
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            .toc-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Some Stars</h1>
        <div class="subtitle">â­ æˆ‘çš„staråˆ—è¡¨ï¼Œæ¯å¤©è‡ªåŠ¨æ›´æ–° â­</div>
        <div class="nav-links">
            <a href="https://rsshub.app/github/starred_repos/n-WN" target="_blank" title="åŸºäºrsshubçš„è®¢é˜…">RSSè®¢é˜…</a>
            <a href="https://github.com/n-WN/my-stars" target="_blank">GitHubä»“åº“</a>
        </div>
        <div class="divider"></div>
    </div>

    <div id="loading" class="loading">
        æ­£åœ¨åŠ è½½æ˜Ÿæ ‡ä»“åº“æ•°æ®...
    </div>

    <div id="content" style="display: none;">
        <div class="toc">
            <h2>ç›®å½•</h2>
            <div id="toc-grid" class="toc-grid"></div>
        </div>
        <div id="repositories"></div>
    </div>

    <div class="footer">
        <p>ç”± <a href="https://github.com/n-WN/my-stars">my-stars</a> è‡ªåŠ¨ç”Ÿæˆ</p>
        <p>æœ€åæ›´æ–°ï¼š<span id="last-update"></span></p>
    </div>

    <script>
        async function loadStarredRepos() {
            try {
                // å°è¯•å¤šä¸ªå¯èƒ½çš„è·¯å¾„
                let response;
                try {
                    response = await fetch('./data.json');
                } catch (e) {
                    // å¦‚æœç›¸å¯¹è·¯å¾„å¤±è´¥ï¼Œå°è¯•ç»å¯¹è·¯å¾„
                    response = await fetch('/my-stars/data.json');
                }
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                
                // éªŒè¯æ•°æ®ç»“æ„
                if (!data || typeof data !== 'object') {
                    throw new Error('æ•°æ®æ ¼å¼æ— æ•ˆï¼šä¸æ˜¯æœ‰æ•ˆçš„JSONå¯¹è±¡');
                }
                
                if (Object.keys(data).length === 0) {
                    throw new Error('æ•°æ®ä¸ºç©º');
                }
                
                console.log('æˆåŠŸåŠ è½½æ•°æ®ï¼ŒåŒ…å«è¯­è¨€:', Object.keys(data));
                console.log('æ€»ä»“åº“æ•°:', Object.values(data).reduce((sum, repos) => sum + repos.length, 0));
                
                // éšè—åŠ è½½æç¤º
                document.getElementById('loading').style.display = 'none';
                document.getElementById('content').style.display = 'block';
                
                // ç”Ÿæˆç›®å½•
                const tocGrid = document.getElementById('toc-grid');
                const repositoriesDiv = document.getElementById('repositories');
                
                Object.keys(data).forEach(language => {
                    // æ·»åŠ åˆ°ç›®å½•
                    const tocItem = document.createElement('a');
                    tocItem.href = `#${language.toLowerCase().replace(/[^a-z0-9]/g, '-')}`;
                    tocItem.className = 'toc-item';
                    tocItem.textContent = `${language} (${data[language].length})`;
                    tocGrid.appendChild(tocItem);
                    
                    // åˆ›å»ºè¯­è¨€åˆ†åŒº
                    const section = document.createElement('div');
                    section.className = 'language-section';
                    section.id = language.toLowerCase().replace(/[^a-z0-9]/g, '-');
                    
                    const title = document.createElement('h2');
                    title.className = 'language-title';
                    title.textContent = `${language} (${data[language].length} ä¸ªä»“åº“)`;
                    section.appendChild(title);
                    
                    // æ·»åŠ ä»“åº“
                    data[language].forEach(repo => {
                        const repoDiv = document.createElement('div');
                        repoDiv.className = 'repo-item';
                        
                        const repoName = document.createElement('a');
                        repoName.href = repo.html_url;
                        repoName.target = '_blank';
                        repoName.className = 'repo-name';
                        repoName.textContent = repo.full_name;
                        
                        const repoDesc = document.createElement('div');
                        repoDesc.className = 'repo-description';
                        repoDesc.textContent = repo.description || 'æš‚æ— æè¿°';
                        
                        const repoStats = document.createElement('div');
                        repoStats.className = 'repo-stats';
                        repoStats.innerHTML = `
                            <span>â­ ${repo.stargazers_count}</span>
                            <span>ğŸ´ ${repo.forks_count || 0}</span>
                            <span>ğŸ“… ${new Date(repo.updated_at).toLocaleDateString('zh-CN')}</span>
                        `;
                        
                        repoDiv.appendChild(repoName);
                        repoDiv.appendChild(repoDesc);
                        repoDiv.appendChild(repoStats);
                        section.appendChild(repoDiv);
                    });
                    
                    repositoriesDiv.appendChild(section);
                });
                
                // è®¾ç½®æœ€åæ›´æ–°æ—¶é—´
                document.getElementById('last-update').textContent = new Date().toLocaleString('zh-CN');
                
            } catch (error) {
                console.error('åŠ è½½æ•°æ®å¤±è´¥:', error);
                document.getElementById('loading').innerHTML = `
                    <div style="color: #d1242f;">
                        âŒ åŠ è½½æ•°æ®å¤±è´¥: ${error.message}<br>
                        <small>è¯·æ£€æŸ¥æ§åˆ¶å°è·å–æ›´å¤šè¯¦ç»†ä¿¡æ¯</small><br>
                        <button onclick="location.reload()" style="margin-top: 1rem; padding: 8px 16px; background: #0969da; color: white; border: none; border-radius: 4px; cursor: pointer;">é‡æ–°åŠ è½½</button>
                    </div>
                `;
                
                // æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯
                console.log('å½“å‰URL:', window.location.href);
                console.log('åŸºç¡€URL:', window.location.origin);
                console.log('è·¯å¾„å:', window.location.pathname);
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', loadStarredRepos);
        
        // å¹³æ»‘æ»šåŠ¨
        document.addEventListener('click', function(e) {
            if (e.target.tagName === 'A' && e.target.getAttribute('href').startsWith('#')) {
                e.preventDefault();
                const target = document.getElementById(e.target.getAttribute('href').substring(1));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            }
        });
    </script>
</body>
</html>
